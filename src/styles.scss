$itemsToInvert: "\
  img,video,object,embed,iframe,canvas,\
  [data-sdm-bg-color=dark][data-sdm-size=sm],\
  [data-sdm-bg-color=dark][data-sdm-size=md],\
  [data-sdm-bg-color=dark][data-sdm-size=lg],\
  [data-sdm-bg-image],\
  [data-sdm-bg-image],\
  [style*='url('],\
  [id*=yandex_rtb],\
  [data-sdm-emoji],\
";

html[data-sdm="on"] {
  // ~0.9 for lighter grayish
  filter: invert(0.92) hue-rotate(180deg) !important;

  body {
    #{$itemsToInvert} {
      filter: invert(1) hue-rotate(180deg) brightness(1.1) !important;

      * {
        filter: initial !important;
      }
    }

    :fullscreen {
      filter: initial !important;
    }
  }
}

// needed for detecting system colors
[data-sdm-scheme="dark"] {
  color-scheme: dark !important;
}
[data-sdm-scheme="light"] {
  color-scheme: light !important;
}

html[data-sdm="on"] {
  &[data-sdm-text-color="both"] body {
    color: #000;
  }
  &[data-sdm-text-color="both"] body {
    color: inherit;
  }
  &[data-sdm-back-color="both"] body {
    background: #fff;
  }
  &[data-sdm-back-color="body"] body {
    background: inherit;
  }
}

html[data-sdm="on"][data-sdm-custom-scroll="on"],
html[data-sdm="off"][data-sdm-custom-scroll="on"][data-sdm-default-custom-scroll="on"] {
  ::-webkit-scrollbar {
    width: 14px;
    height: 14px;
    background: #222;
  }
  ::-webkit-scrollbar-track {
    border: 0 solid #363636;
    background: #222;
  }
  ::-webkit-scrollbar-track:horizontal {
    border-top-width: 1px;
  }
  ::-webkit-scrollbar-track:vertical {
    border-left-width: 1px;
  }
  ::-webkit-scrollbar-corner {
    background: #222;
  }
  ::-webkit-scrollbar-thumb {
    border-radius: 9999px;
    background: #656565;
    box-shadow: inset 0 0 1px 0 #1b1b1b;
    border: 4px solid transparent;
    background-clip: padding-box;
  }
}
